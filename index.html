<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Проект Пинчон вики">
    <meta name="keywords" content="Пинчон, Томас Пинчон, Радуга тяготения">
    <meta name="author" content="">
    <link rel="stylesheet" href="./static/css/index.css">
    <title>Пинчонвики</title>
  </head>
  <body class="page">
    <header class="header">
      <a class="header__logo-link" href="index.html" target="_self">
        <img class="header__logo" src="./static/img/logo.png" alt="лого">
      </a>
      <ul class="header__links">      
        <li class="header__item"><a class="header__link link" href="author.html" target="_self">Томас Пинчон</a></li>
        <li class="header__item"><a class="header__link link" href="/about/" target="_self">О Проекте</a></li>
        <li class="header__item"><a class="header__link link" href="/in_development" target="_self">Другие Книги</a></li>
      </ul>
    </header>
    <main class="content">
      <section class="promo">
        <div class="promo__title-box">Радуга тяготения</div>
        <p class="promo__text">Вводный текст-инструкция по пользованию сайтом и статьями. Текст-инструкция по пользованию сайтом и статьями.</p>
        <div class="promo__circle"></div>
        <div class="promo__rocket"></div>
      </section>
      <section class="chapters">
        <div class="chapters__dark">
          <div class="chapter chapter_dark">
            <div class="chapter__content">
              <div class="chapter__overlay chapter__overlay_dark"></div>
              <div class="chapter__header">
                <h1 class="chapter__title chapter__title_dark">Раздел 1</h1>
                <h2 class="chapter__subtitle">Как перестать беспокоиться и начать читать роман</h2>
              </div>
              <p class="chapter__text">Статья доброго духа-андроида Андрея Н.И. Петрова о преимуществах «Радуги тяготения» над всеми другими известными вам книгами. Из нее вы узнаете, из чего состоит радуга (а чего в ней нет) и зачем тратить на нее несколько месяцев жизни. Рекомендуется к прочтению в любой момент. Если после этой статьи вы немедленно не взяли в руки роман, скорее всего, этот сайт не для вас.</p>
              <a class="chapter__link chapter__link_dark" href="/rainbow_part1">Читать</a>
            </div>
            <img class="tentacle1" src="./static/img/tentacle1.png" alt="фон">
          </div>
          <div class="chapter chapter_dark">
            <span id="value" class="chapter__counter">00000</span>
            <div class="chapter__content chapter__content_right">
              <div class="chapter__overlay chapter__overlay_dark"></div>
              <div class="chapter__header">
                <h1 class="chapter__title chapter__title_dark">Раздел 2</h1>
                <h2 class="chapter__subtitle">Примечания</h2>
              </div>
              <p class="chapter__text">Постраничные примечания к роману, объясняющие значения малоупотребимых слов и выражений, содержащие справки об исторических личностях и событиях, о произведениях искусства, математических формулах и т.п. Рекомендуется к прочтению параллельно с чтением романа. Здесь нет никаких спойлеров. Примечания мы делали, дабы вы меньше блуждали по просторам интернета в поисках нужной информации.</p>
              <a class="chapter__link chapter__link_dark" href="/rainbow_part2">Читать</a>
            </div>
            <img class="tentacle2" src="./static/img/tentacle2.png" alt="фон">
          </div>
          <div class="chapter chapter_dark">
            <div class="chapter__content">
              <div class="chapter__overlay chapter__overlay_dark"></div>
              <div class="chapter__header">
                <h1 class="chapter__title chapter__title_dark">Раздел 3</h1>
                <h2 class="chapter__subtitle">Комментарии</h2>
              </div>
              <p class="chapter__text">Первая часть комментария состоит из краткого содержания главы романа — для тех, кто хочет упорядочить свой нарратив. Вторая часть — из потока сознания тайного литературоведа Михаила Монастырева (которого подчас поправляют его внимательные коллеги) о том, что происходит в главе и как это связано со всем предыдущим. Рекомендуется к прочтению после каждой главы, дабы сопоставить свои соображения о книге с нашими. Не удивляйтесь, если никакого совпадения не случится.</p>
              <a class="chapter__link chapter__link_dark" href="/rainbow_part3">Читать</a>
            </div>
            <img class="tentacle3" src="./static/img/tentacle3.png" alt="фон">
          </div>
        </div>
        <div class="chapters__light">
          <div class="chapter">
            <div class="chapter__content chapter__content_right">
              <div class="chapter__overlay"></div>
              <div class="chapter__header">
                <h1 class="chapter__title">Раздел 4</h1>
                <h2 class="chapter__subtitle">KEZVH</h2>
              </div>
              <p class="chapter__text">Само название говорит о том, что этот раздел для тех, кто уже прочитал роман. Здесь собраны статьи, соображения, мыслеобразы и некоторые справочные материалы о ключевых и поначалу вроде бы неочевидных темах романа — о странных ученых, изобретших странные вещества и странные материалы; о корпорациях; о кинофильмах; о таро и о многом другом. Больше спойлеров хороших и разных.</p>
              <a class="chapter__link" href="/rainbow_part4">Читать</a>
            </div>
            <img class="tentacle4" src="./static/img/tentacle4.png" alt="фон">
          </div>
          <div class="chapter">
            <div class="chapter__content">
              <div class="chapter__overlay"></div>
              <div class="chapter__header">
                <h1 class="chapter__title">Раздел 5</h1>
                <h2 class="chapter__subtitle">Хронология</h2>
              </div>
              <p class="chapter__text">Все события романа представлены в табличной форме и строгой линейной хронологической последовательности. Надеемся, что мы ничего не забыли. Рекомендуется к прочтению только после окончания чтения книги, ибо тут сосредоточение всех мыслимых и немыслимых спойлеров.</p>
              <a class="chapter__link" href="/rainbow_part5">Читать</a>
            </div>
            <img class="tentacle5" src="./static/img/tentacle5.png" alt="фон">
          </div>
          <div class="chapter">
            <div class="chapter__overlay"></div>
            <img class="chapter__image" src="./static/img/lady.png" alt="персонаж">
            <div class="chapter__content chapter__content_right">
              <div class="chapter__header">
                <h1 class="chapter__title">Раздел 6</h1>
                <h2 class="chapter__subtitle">Персонажи</h2>
              </div>
              <p class="chapter__text">Все персонажи романа представлены в схематичной и табличной форме, с их оригинальными английскими именами, краткими характеристиками, портретами, связями и постраничными упоминаниями (с соблюдением требований законодательства о персональных данных). Если вы не хотите заранее знать, кто чей брат (сестра) или кто с кем сольется-таки в экстазе, лучше сюда не заходить. Мы вас предупредили.</p>
              <a class="chapter__link" href="/rainbow_part6">Читать</a>
            </div>
          </div>
          <div class="chapter">
            <div class="chapter__content">
              <div class="chapter__overlay"></div>
              <div class="chapter__header">
                <h1 class="chapter__title">Раздел 7</h1>
                <h2 class="chapter__subtitle">Как перестать беспокоиться-2 и начать перечитывать </h2>
              </div>
              <p class="chapter__text">Статья ведущего пинчоноведа и телеграфиста «Радуги спойлерения» Станислава Распеченко о том, что все это значило и как теперь с этим жить дальше. Рекомендуется к прочтению после того, как вы дойдете до слов «Теперь все вместе…» и вам захочется незамедлительно вернуться к первой странице.</p>
              <a class="chapter__link" href="/rainbow_part7">Читать</a>
            </div>
            <img class="tentacle6" src="./static/img/tentacle6.png" alt="фон">
          </div>
        </div>
      </section>
    </main>
    <footer class="footer">
      <div class="footer__container">
        <p class="footer__copyright">&copy;&nbsp;<script>document.write(new Date().getFullYear())</script></p>
        <a class="footer__link" href="#">Телеграм канал</a>
      </div>
    </footer>
    <p class="to-top__text">В начало</p>
    <button class="to-top__button" type="button" id="scrollToTopLink"></button>
    <script>

      // Анимация ракеты
      let circle = document.querySelector('.promo__circle');
      let rocket = document.querySelector('.promo__rocket');
      window.onscroll = magic;
      function magic() {
        circle.style.width = `${23.75 + window.pageYOffset * 0.7}vw`;

        circle.style.bottom = `${6.39 - window.pageYOffset * 0.1}vw`;
        circle.style.right = `${10.56 - window.pageYOffset * 0.2}vw`;

        rocket.style.bottom = `${0.49 + window.pageYOffset*0.1}vw`;
        rocket.style.right = `${9.17 - window.pageYOffset*0.1}vw`;
      }

      // Счётчик
      function animateValue(obj, start, end, duration) {
      let startTimestamp = null;
      const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        obj.innerHTML = Math.floor(progress * (end - start) + start);
        if (progress < 1) {
          window.requestAnimationFrame(step);
        }
      };
      window.requestAnimationFrame(step);
      }
      const obj = document.getElementById('value');
      animateValue(obj, 99999, 00000, 50000000);

      // Скролл вверх
      document.getElementById('scrollToTopLink').addEventListener('click', function(event) {
        event.preventDefault();
        scrollToTop();
      });
      function scrollToTop() {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      }

      //Появление текста из-под оверлея
      // const overlays = document.querySelectorAll('.chapter__overlay');
      // function onEntry(entry) {
      //   entry.forEach(change => {
      //     if(change.isIntersecting) {
      //       let rect = change.getBoundingClientRect(),
      //       scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      //       let distanceTop = rect.top + scrollTop;
      //       let elHeight = change.target.style.height
      //       change.target.style.height = `${elHeight + distanceTop - window.pageYOffset}px`;
      //     }
      //   })
      // }
      // let options = { threshold: [0.5]};
      // let observer = new IntersectionObserver(onEntry, options);
      // for (let item of overlays) {
      //   observer.observe(item);
      // }

    </script>
  </body>
</html>